"use strict";const username=document.querySelector(".js-inputUser"),password=document.querySelector(".js-inputPassword"),button=document.querySelector(".js-button"),container=document.querySelector(".js-container"),closeSection=document.getElementById("sectionClose"),logout=document.querySelector(".js-logout");let login=[],results=[],html="";function list(){for(const i of results)console.log(i.scoreAnalysis),html+=`<li id=${i.id} class="page__main--sectionFile__sectionList--list hidden js-list">`,html+=`<h4 class="page__main--sectionFile__sectionList--list__name">Fichero: <span class="page__main--sectionFile__sectionList--list__name--span"> ${i.fileName}${"0"===i.scoreAnalysis?'<i class="page__main--sectionFile__sectionList--list__name--span__iconClean fas fa-circle"></i>':'<i class="page__main--sectionFile__sectionList--list__name--span__iconDanger fas fa-circle"></i>'}</span></h4>`,html+=`<p class="page__main--sectionFile__sectionList--list__name">Md5:\n     <span class="page__main--sectionFile__sectionList--list__name--span">${i.hashmd5}</span></p>`,html+=`<p class="page__main--sectionFile__sectionList--list__name">Fecha de inserción: <span class="page__main--sectionFile__sectionList--list__name--span">${i.insertionDate}</span></p>`,html+=`<p class="page__main--sectionFile__sectionList--list__name">Última actualización: <span class="page__main--sectionFile__sectionList--list__name--span">${i.lastUpdate}</span> </p>`,html+=`<p class="page__main--sectionFile__sectionList--list__name">Sistema operativo: <span class="page__main--sectionFile__sectionList--list__name--span"> ${i.systemConcerned}</span></p></li>`;container.innerHTML=html,listenList()}function loginCredentials(){const i=md5(password.value);username.value===login.username&&i===login.password?(html="",html+='<label for="page">Página:\n    <select class="js-page" id="page" name="page">\n      <option value="1">1</option>\n      <option value="2">2</option>\n    </select></label>',list(),logout.classList.remove("hidden"),closeSection.classList.add("hidden"),username.value="",password.value=""):(username.value="",password.value="",html="",html+="<div> Usuario o contraseña incorrecta, comprueba las mayúsculas </div>"),container.innerHTML=html,listenList()}function handleList(i){const n=i.currentTarget.id,s=results[n-1];html=" ",html+='<article class="page__main--sectionFile__sectionInfo--info"> <h3 class="page__main--sectionFile__sectionInfo--info__title">Información </h3>',html+=`<p class="page__main--sectionFile__sectionInfo--info__name"> Nombre completo: <span class="page__main--sectionFile__sectionInfo--info__name--span">${s.fileNameComplete}</span> </p>`,html+=`<p class="page__main--sectionFile__sectionInfo--info__name">Extensión: <span class="page__main--sectionFile__sectionInfo--info__name--span">${"PDF"===s.fileExtension?'PDF <i class="fas fa-file-pdf page__main--sectionFile__sectionInfo--info__name--span__icon"></i>':""} </span></p>`,html+=`<p class="page__main--sectionFile__sectionInfo--info__name"> Tamaño: <span class="page__main--sectionFile__sectionInfo--info__name--span">${s.fileSize} </span></p>`,html+=`<ul class="page__main--sectionFile__sectionInfo--info__list"> <li class="page__main--sectionFile__sectionInfo--info__list--hash"> Hash md5: <span class="page__main--sectionFile__sectionInfo--info__list--hash__span">${s.hash.md5}</span></li> `,html+=`<li class="page__main--sectionFile__sectionInfo--info__list--hash"> Hash sha-1: <span class="page__main--sectionFile__sectionInfo--info__list--hash__span">${s.hash.sha1}</span></li> `,html+=`<li class="page__main--sectionFile__sectionInfo--info__list--hash"> Hash sha256: <span class="page__main--sectionFile__sectionInfo--info__list--hash__span">${s.hash.sha256}</span></li></ul> `,html+=`<p class="page__main--sectionFile__sectionInfo--info__ip"> Dirección <span class="page__main--sectionFile__sectionInfo--info__ip--span">ip</span> a las que se ha conectado: <span class="page__main--sectionFile__sectionInfo--info__ip--span__span">${s.ip}</span> </p>\n  `,html+=`<p class="page__main--sectionFile__sectionInfo--info__name"> Puntuación obtenida tras el análisis: <span class="page__main--sectionFile__sectionInfo--info__name--span">${s.scoreAnalysis}</span></p>`,html+=`<ul class="page__main--sectionFile__sectionInfo--info__list"> <p class="page__main--sectionFile__sectionInfo--info__list--name">Listado de ficheros generados:</p> <li class="page__main--sectionFile__sectionInfo--info__list--file">${s.fileList.fileOne}</li>`,html+=` <li class="page__main--sectionFile__sectionInfo--info__list--file">${s.fileList.fileTwo}</li>`,html+=` <li class="page__main--sectionFile__sectionInfo--info__list--file">${s.fileList.fileThree}</li></ul>`,html+=`<ul class="page__main--sectionFile__sectionInfo--info__list"> <p class="page__main--sectionFile__sectionInfo--info__list--name">Listado de antivirus:<p> <li class="page__main--sectionFile__sectionInfo--info__list--antivirus">Avast <i class="fas fa-long-arrow-alt-right"></i> <span class="page__main--sectionFile__sectionInfo--info__list--antivirus__span">${"clean"===s.antivirusList.avast?'Limpio <i class="fas fa-check page__main--sectionFile__sectionInfo--info__list--antivirus__span--iconClean"></i>':'Peligroso <i class="fas fa-exclamation-triangle page__main--sectionFile__sectionInfo--info__list--antivirus__span--iconMalicious"></span></i>'}</span></li>`,html+=`<li class="page__main--sectionFile__sectionInfo--info__list--antivirus">McAfree <i class="fas fa-long-arrow-alt-right"></i> <span class="page__main--sectionFile__sectionInfo--info__list--antivirus__span">${"clean"===s.antivirusList.mcafree?'Limpio <i class="fas fa-check page__main--sectionFile__sectionInfo--info__list--antivirus__span--iconClean"></i>':'Peligroso <i class="fas fa-exclamation-triangle page__main--sectionFile__sectionInfo--info__list--antivirus__span--iconMalicious"></span></i>'}</li>`,html+=`<li class="page__main--sectionFile__sectionInfo--info__list--antivirus">BitDefender <i class="fas fa-long-arrow-alt-right"></i> <span class="page__main--sectionFile__sectionInfo--info__list--antivirus__span">${"clean"===s.antivirusList.bitdefender?'Limpio <i class="fas fa-check page__main--sectionFile__sectionInfo--info__list--antivirus__span--iconClean"></i>':'Peligroso <i class="fas fa-exclamation-triangle page__main--sectionFile__sectionInfo--info__list--antivirus__span--iconMalicious"></span></i>'}</li>`,html+=`<li class="page__main--sectionFile__sectionInfo--info__list--antivirus">Panda <i class="fas fa-long-arrow-alt-right"></i> <span class="page__main--sectionFile__sectionInfo--info__list--antivirus__span">${"clean"===s.antivirusList.panda?'Limpio <i class="fas fa-check page__main--sectionFile__sectionInfo--info__list--antivirus__span--iconClean"></i>':'Peligroso <i class="fas fa-exclamation-triangle page__main--sectionFile__sectionInfo--info__list--antivirus__span--iconMalicious"></span></i>'}</li>`,html+=' </ul><form class="page__main--sectionFile__sectionInfo--info__form"><input\n  class="page__main--sectionFile__sectionInfo--info__form--button js-buttonBack"\n  type="button"\n  value="Volver"\n/></form></article>',container.innerHTML=html,back()}function handlerBack(){html="",list()}function back(){const i=document.querySelectorAll(".js-buttonBack");for(const n of i)n.addEventListener("click",handlerBack)}function listenList(){const i=document.querySelectorAll(".js-list");for(const n of i)n.addEventListener("click",handleList)}function api(){fetch("https://maitaneabad.github.io/api-technical-test-ravenloop/api/data.json").then(i=>i.json()).then(i=>{login=i.login,results=i.results})}function handlerButton(){loginCredentials()}function handlerLogout(){location.reload()}api(),button.addEventListener("click",handlerButton),logout.addEventListener("click",handlerLogout);